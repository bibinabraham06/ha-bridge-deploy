# Frigate Configuration for Your Specific Unifi Protect Cameras
# Ready for deployment with your RTSP URLs

# MQTT Configuration (connects to Home Assistant)
mqtt:
  host: 192.168.0.81  # Your Home Assistant IP
  port: 1883
  topic_prefix: frigate
  client_id: frigate

# Database for storing events
database:
  path: /media/frigate/frigate.db

# API Configuration
api:
  host: 0.0.0.0
  port: 5000

# AI Detection Model Configuration
model:
  width: 320
  height: 320
  input_tensor: nhwc
  input_pixel_format: rgb
  path: /openvino-model/ssdlite_mobilenet_v2.xml
  labelmap_path: /openvino-model/coco_91cl_bkgr.txt

# Detection Engine
detectors:
  ov:
    type: openvino
    device: AUTO

# Go2RTC for WebRTC streaming (your specific camera URLs)
go2rtc:
  streams:
    front_doorbell: rtsps://192.168.0.1:7441/TD0n4xjjZyz7098h?enableSrtp
    garage: rtsps://192.168.0.1:7441/w43nFnaYRCXWS4r7?enableSrtp
    front_driveway: rtsps://192.168.0.1:7441/tSTGrRA5hL0JDWdq?enableSrtp
    back_patio: rtsps://192.168.0.1:7441/SLNQWyDL3NmCC29h?enableSrtp
    back_left_patio: rtsps://192.168.0.1:7441/RK7XFgef0NfKdgUj?enableSrtp

# Camera Configurations - Your 5 Unifi Protect Cameras
cameras:
  front_doorbell:
    enabled: true
    ffmpeg:
      inputs:
        - path: rtsps://192.168.0.1:7441/TD0n4xjjZyz7098h?enableSrtp
          roles:
            - detect
            - record
    detect:
      enabled: true
      width: 1920
      height: 1080
      fps: 5
      max_disappeared: 25
    record:
      enabled: true
      retain:
        days: 14  # Keep doorbell recordings longer
        mode: active_objects
      events:
        pre_capture: 5
        post_capture: 10
        objects:
          - person
          - car
          - package
    snapshots:
      enabled: true
      timestamp: false
      bounding_box: true
      crop: false
      height: 500
    zones:
      entrance:
        coordinates: 300,100,1620,100,1620,500,300,500
        objects:
          - person
          - package
      walkway:
        coordinates: 100,500,1820,500,1820,900,100,900
        objects:
          - person
      driveway_edge:
        coordinates: 0,900,1920,900,1920,1080,0,1080
        objects:
          - car
          - person
    objects:
      track:
        - person
        - car
        - package
        - bicycle
        - dog
      filters:
        person:
          min_area: 2500
          max_area: 100000
          threshold: 0.75
          min_score: 0.60
        package:
          min_area: 1000
          max_area: 50000
          threshold: 0.70
        car:
          min_area: 15000
          threshold: 0.70

  garage:
    enabled: true
    ffmpeg:
      inputs:
        - path: rtsps://192.168.0.1:7441/w43nFnaYRCXWS4r7?enableSrtp
          roles:
            - detect
            - record
    detect:
      enabled: true
      width: 1920
      height: 1080
      fps: 5
    record:
      enabled: true
      retain:
        days: 7
        mode: active_objects
    snapshots:
      enabled: true
    zones:
      garage_door:
        coordinates: 400,200,1520,200,1520,800,400,800
        objects:
          - person
          - car
      garage_interior:
        coordinates: 600,400,1320,400,1320,700,600,700
        objects:
          - person
    objects:
      track:
        - person
        - car
        - bicycle

  front_driveway:
    enabled: true
    ffmpeg:
      inputs:
        - path: rtsps://192.168.0.1:7441/tSTGrRA5hL0JDWdq?enableSrtp
          roles:
            - detect
            - record
    detect:
      enabled: true
      width: 1920
      height: 1080
      fps: 5
    record:
      enabled: true
      retain:
        days: 7
        mode: active_objects
    snapshots:
      enabled: true
    zones:
      main_driveway:
        coordinates: 200,300,1720,300,1720,900,200,900
        objects:
          - person
          - car
          - truck
          - bicycle
      street_view:
        coordinates: 0,0,1920,300,1920,1080,0,1080
        objects:
          - car
          - truck
          - person
    objects:
      track:
        - person
        - car
        - truck
        - bicycle
        - motorcycle

  back_patio:
    enabled: true
    ffmpeg:
      inputs:
        - path: rtsps://192.168.0.1:7441/SLNQWyDL3NmCC29h?enableSrtp
          roles:
            - detect
            - record
    detect:
      enabled: true
      width: 1920
      height: 1080
      fps: 5
    zones:
      patio_area:
        coordinates: 300,300,1620,300,1620,800,300,800
        objects:
          - person
          - dog
          - cat
      yard_area:
        coordinates: 0,800,1920,800,1920,1080,0,1080
        objects:
          - person
          - dog
          - cat
    objects:
      track:
        - person
        - dog
        - cat
        - bicycle

  back_left_patio:
    enabled: true
    ffmpeg:
      inputs:
        - path: rtsps://192.168.0.1:7441/RK7XFgef0NfKdgUj?enableSrtp
          roles:
            - detect
            - record
    detect:
      enabled: true
      width: 1920
      height: 1080
      fps: 5
    zones:
      left_patio:
        coordinates: 200,400,1720,400,1720,700,200,700
        objects:
          - person
          - dog
      road_view:
        coordinates: 0,0,1920,400,1920,1080,0,1080
        objects:
          - person
          - car
          - truck
    objects:
      track:
        - person
        - car
        - truck
        - dog
        - cat

# Global Object Detection Settings
objects:
  track:
    - person
    - car
    - truck
    - bicycle
    - motorcycle
    - dog
    - cat
    - package
  filters:
    person:
      min_area: 2500
      max_area: 100000
      threshold: 0.75
      min_score: 0.60
    car:
      min_area: 15000
      max_area: 200000
      threshold: 0.70
      min_score: 0.60
    truck:
      min_area: 20000
      max_area: 300000
      threshold: 0.70
    package:
      min_area: 1000
      max_area: 50000
      threshold: 0.70
      min_score: 0.65
    bicycle:
      min_area: 2000
      max_area: 50000
      threshold: 0.70
    motorcycle:
      min_area: 3000
      max_area: 80000
      threshold: 0.70
    dog:
      min_area: 1000
      max_area: 50000
      threshold: 0.70
    cat:
      min_area: 500
      max_area: 20000
      threshold: 0.70

# Recording Configuration
record:
  enabled: true
  expire_interval: 60
  retain:
    days: 7
    mode: active_objects
  events:
    pre_capture: 5
    post_capture: 10
    objects:
      - person
      - car
      - package
    retain:
      default: 7
      mode: motion
      objects:
        person: 14  # Keep person events for 2 weeks
        package: 30  # Keep package events for 1 month
        car: 7

# Snapshot Configuration
snapshots:
  enabled: true
  timestamp: false
  bounding_box: true
  crop: false
  height: 500
  retain:
    default: 7
    objects:
      person: 14
      package: 30
      car: 7

# Motion Detection (fallback)
motion:
  threshold: 25
  contour_area: 30
  delta_alpha: 0.2
  frame_alpha: 0.2
  frame_height: 180
  improve_contrast: false

# UI Configuration
ui:
  live_mode: mse
  timezone: America/New_York  # Adjust to your timezone
  use_experimental: false
  strftime_fmt: "%m/%d/%Y %H:%M:%S"

# Logging
logger:
  default: info
  logs:
    frigate.video: warning
    frigate.object_processing: info
    frigate.mqtt: info